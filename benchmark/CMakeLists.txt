function(benchmark)
    add_executable(${ARGV0} ${ARGV0}.cpp ${ARGV1})
    set_target_properties(${ARGV0} PROPERTIES CXX_STANDARD 11)
    target_include_directories(${ARGV0} PUBLIC ../lib)
    target_link_libraries(${ARGV0} five-cuda five-guile)

    if(APPLE)
      # Add the rpath to the lib
      set_property(TARGET ${ARGV0} PROPERTY BUILD_RPATH ${CMAKE_CUDA_IMPLICIT_LINK_DIRECTORIES})
    endif()
endfunction()

benchmark(render_2d)
benchmark(render_2d_table)
benchmark(render_3d)
benchmark(render_3d_multi)
benchmark(render_3d_table)
benchmark(circle)
benchmark(donut)
benchmark(tape_size ../gui/interpreter.cpp)
benchmark(brute)
benchmark(dump_tape)
benchmark(tape_shortening)
benchmark(ssao)
benchmark(tape_building_time)
benchmark(v2)
